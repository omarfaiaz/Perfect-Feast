<section class="py-8">
  <div class="container mx-auto px-4">
    <div class="bg-brandPrimary rounded-lg p-8 md:p-12 border border-white border-opacity-30 flex flex-col md:flex-row items-stretch gap-8">
      <!-- Left: Info Text -->
      <div class="flex-1 flex items-center">
        <div class="text-white lg:text-lg leading-relaxed">
          {{ product.metafields.custom.product_cta | metafield_tag }}
        </div>
      </div>
      <!-- Divider -->
      <div class="hidden md:block w-px border-r border-white border-opacity-40 mx-8"></div>
      <!-- Right: Add to Cart Form -->
      <div class="flex-1 flex items-center justify-center">
        <form
          action="{{ routes.cart_add_url }}"
          method="post"
          enctype="multipart/form-data"
          class="w-full max-w-xs space-y-4">
          <div>
            <label for="variant" class="sr-only">Value</label>
            <select
              id="variant"
              name="id"
              class="w-full px-4 py-3 rounded bg-white text-gray-700 font-semibold focus:outline-none"
              required>
              <option disabled selected>Value</option>
              {% for variant in product.variants %}
                <option
                  value="{{ variant.id }}"
                  {% unless variant.available %}
                  disabled{% endunless %}>
                  {{ variant.title }}
                </option>
              {% endfor %}
            </select>
            <p id="variant-error" class="text-white text-sm mt-2 hidden">Please select a value before ordering.</p>
          </div>
          <div>
            <label for="quantity" class="sr-only">Quantity</label>
            <input
              id="quantity"
              name="quantity"
              type="number"
              min="1"
              value="1"
              class="w-full px-4 py-3 rounded bg-white text-gray-700 font-semibold focus:outline-none text-center" />
          </div>
          <button type="submit" class="w-full btn btn--secondary hover:!border-white">
            ORDER NOW
          </button>
        </form>
      </div>
    </div>
    <!-- Download Buttons -->
    <div class="flex flex-col md:flex-row gap-6 justify-center mt-10">
      <a
        href="{{ section.settings.button_one_url }}"
        target="_blank"
        class="block px-8 py-4 bg-gray-100 text-brandPrimary font-bold rounded text-center tracking-wide hover:bg-gray-200 transition-all duration-200">
        DOWNLOAD ORDER FORM
      </a>
      <a
        href="{{ section.settings.button_two_url }}"
        target="_blank"
        class="block px-8 py-4 bg-gray-100 text-brandPrimary font-bold rounded text-center tracking-wide hover:bg-gray-200 transition-all duration-200">
        DOWNLOAD W-9 FORM
      </a>
    </div>
  </div>
</section>


<section class="pb-12">
  <div class="container mx-auto px-4">
    <div class="text-lg">{{ product.metafields.custom.additional_information | metafield_tag }}</div>
  </div>

</section>

{% assign faqs = product.metafields.custom.select_faq_items.value %}
{% if product and faqs %}
  <section class="pb-12">
    <div class="container mx-auto px-4">
      <div class="max-w-5xl mx-auto">
        <div class="faq-section">
          <h2 class="text-center mb-6">{{ product.title }} FAQs</h2>
          <ul class="space-y-4 mt-12 list-none">
            {% for faq in faqs %}
              <li class="border-b border-gray-200 list-none">
                <div class="faq-question w-full flex justify-between items-center text-left py-4 cursor-pointer">
                  <span class="text-xl font-bold">{{ faq.faq_question }}</span>
                  <svg
                    class="w-5 h-5 text-brandPrimary transition-transform duration-200"
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 20 20"
                    fill="currentColor">
                    <path
                      fill-rule="evenodd"
                      d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                      clip-rule="evenodd" />
                  </svg>
                </div>
                <div class="faq-answer hidden overflow-hidden py-2 mb-4">
                  <div class="answer text-gray-700">
                    {{ faq.faq_answer | metafield_tag }}
                  </div>
                </div>
              </li>
            {% endfor %}
          </ul>
        </div>
      </div>
    </div>
  </section>
{% endif %}

<script>
  document.addEventListener('DOMContentLoaded', function () {
  const form = document.querySelector('form[action="{{ routes.cart_add_url }}"]');
  const select = document.getElementById('variant');
  const error = document.getElementById('variant-error');
  
  if (form && select && error) {
    form.addEventListener('submit', function (e) {
      if (select.selectedIndex === 0 || select.value === "" || select.options[select.selectedIndex].disabled) {
        e.preventDefault();
        error.classList.remove('hidden');
        select.classList.add('border', 'border-red-500');
        select.focus();
      } else {
        error.classList.add('hidden');
        select.classList.remove('border', 'border-red-500');
      }
    });
  
    select.addEventListener('change', function () {
      if (select.selectedIndex !== 0 && select.value !== "" && !select.options[select.selectedIndex].disabled) {
        error.classList.add('hidden');
        select.classList.remove('border', 'border-red-500');
      }
    });
  }
  });
</script>
{% schema %}
  {
    "name": "Product Information",
    "settings": [
      {
        "type": "url",
        "label": "Button One URL",
        "id": "button_one_url"
      }, {
        "type": "url",
        "label": "Button Two URL",
        "id": "button_two_url"
      }
    ]
  }
{% endschema %}