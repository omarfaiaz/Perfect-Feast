{% comment %} 
    Reset password section
{% endcomment %}

<section class="py-16 bg-gray-50 min-h-[60vh]">
  <div class="container mx-auto px-4">
    <div class="max-w-md mx-auto">
      <div class="text-center mb-8">
        <h1 class="text-3xl font-bold text-gray-900">
          {{ section.settings.heading | default: "Reset your password" }}
        </h1>
        {% if section.settings.subheading != blank %}
          <p class="text-gray-600 mt-2">{{ section.settings.subheading }}</p>
        {% endif %}
      </div>

      <div class="bg-white rounded-2xl shadow-md p-8">
        {% form 'reset_customer_password' %}
          <input
            type="hidden"
            name="reset_password_token"
            value="{{ reset_password_token }}" />

          {% if form.errors %}
            <div class="mb-6 p-4 bg-red-50 border border-red-100 text-red-700 rounded">
              <strong class="block mb-1">There was a problem</strong>
              <ul class="list-disc pl-5">
                {% for err in form.errors %}
                  <li>{{ err }}</li>
                {% endfor %}
              </ul>
            </div>
          {% endif %}

          {% if form.posted_successfully %}
            <div class="mb-6 p-4 bg-green-50 border border-green-100 text-green-700 rounded text-center">
              Your password has been updated.
              <a href="{{ routes.account_login_url }}" class="text-brandPrimary font-semibold hover:underline">Sign in</a>.
            </div>
          {% else %}
            <div class="space-y-4">
              <label class="block">
                <span class="text-sm font-medium text-gray-700">New password</span>
                <input
                  name="customer[password]"
                  type="password"
                  required
                  class="mt-2 w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brandPrimary"
                  placeholder="Choose a new password" />
              </label>

              <label class="block">
                <span class="text-sm font-medium text-gray-700">Confirm new password</span>
                <input
                  name="customer[password_confirmation]"
                  type="password"
                  required
                  class="mt-2 w-full px-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-brandPrimary"
                  placeholder="Confirm password" />
              </label>

              <button type="submit" class="w-full py-3 bg-brandPrimary text-white font-bold rounded-lg hover:opacity-95 transition">
                Update password
              </button>

              <p class="text-center text-sm text-gray-600">
                Remembered your password?
                <a href="{{ routes.account_login_url }}" class="text-brandPrimary font-medium hover:underline">Sign in</a>
              </p>
            </div>
          {% endif %}
        {% endform %}
      </div>
    </div>
  </div>
</section>

{% schema %}
  {
    "name": "Reset password",
    "settings": [
      {
        "type": "text",
        "id": "heading",
        "label": "Heading",
        "default": "Reset your password"
      }, {
        "type": "textarea",
        "id": "subheading",
        "label": "Subheading",
      }
    ]
  }
{% endschema %}